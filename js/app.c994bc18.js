(function(e){function t(t){for(var n,s,u=t[0],a=t[1],l=t[2],p=0,v=[];p<u.length;p++)s=u[p],o[s]&&v.push(o[s][0]),o[s]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);c&&c(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,u=1;u<r.length;u++){var a=r[u];0!==o[a]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=a;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0622":function(e,t,r){},"215a":function(e,t,r){"use strict";var n=r("84ad"),o=r.n(n);o.a},"215e":function(e,t,r){"use strict";var n=r("5d4f"),o=r.n(n);o.a},2429:function(e,t,r){},4471:function(e,t,r){"use strict";var n=r("0622"),o=r.n(n);o.a},"5d4f":function(e,t,r){},"730a":function(e,t,r){"use strict";var n=r("2429"),o=r.n(n);o.a},"84ad":function(e,t,r){},a218:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),o=r("ce5b"),i=r.n(o),s=r("9ab4"),u=r("2f62"),a=function(){function e(t){this.name="",this.redirectUrl=null,this.logged=!1,t instanceof e?Object.assign(this,t):this.name=t}return e}(),l=function(){function e(e){this.enabled=!1,this.link=null,this.name=null,this.published=null,this.title=null,this.uniq=null,Object.assign(this,e),this.published=new Date(e.published).toLocaleString()}return Object.defineProperty(e.prototype,"label",{get:function(){return"<b>"+this.title+"</b> &mdash; "+this.published},enumerable:!0,configurable:!0}),e}();function c(){return function(e,t,r){var n=r.value;return r.value=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=t[0],i=o.commit,s=o.dispatch;return s("addWorker",null,{root:!0}).then(function(r){return n.apply(e,t).catch(function(e){console.error(e),i("setError",e.message,{root:!0})}).finally(function(){return s("removeWorker",{current:r},{root:!0})})})},r}}var p=r("8c4f"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.busy?r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:100,width:5}})],1):r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("div",e._l(e.notLoggedProviders,function(t){return r("v-btn",{key:t.name,attrs:{large:"",color:"primary"},on:{click:function(r){e.login(t)}}},[e._v(e._s(t.name))])}))])},f=[],d=r("60a3"),h=r("4bb5"),m=Object(h["d"])("providers"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.busy=!1,t}return s["c"](t,e),Object.defineProperty(t.prototype,"notLoggedProviders",{get:function(){return this.providersList.filter(function(e){return!e.logged})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providersTitle",{get:function(){return this.providersList.length?this.notLoggedProviders.length?"Please select provider":"You already logged in every provider":"Unfortunately providers list is empty"},enumerable:!0,configurable:!0}),t.prototype.mounted=function(){this.getProviders()},t.prototype.login=function(e){var t=this;this.busy=!0,this.getProviderRedirect(e.name).then(function(e){return t.busy=e})},s["b"]([m.Getter("list")],t.prototype,"providersList",void 0),s["b"]([Object(h["a"])("getProviders",{namespace:"providers"})],t.prototype,"getProviders",void 0),s["b"]([Object(h["a"])("getProviderRedirect",{namespace:"providers"})],t.prototype,"getProviderRedirect",void 0),t=s["b"]([Object(d["a"])({})],t),t}(d["c"]),g=b,y=g,k=(r("cfb3"),r("2877")),_=Object(k["a"])(y,v,f,!1,null,"3a448ec0",null);_.options.__file="Login.vue";var w=_.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",[r("h5",{staticClass:"text-xs-center headline"},[e._v("\n      Success"),r("v-icon",{attrs:{color:"primary",large:""}},[e._v("done")])],1)])],1)},j=[],S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code="",t}return s["c"](t,e),t.prototype.mounted=function(){this.code=this.$route.query.code,this.id&&this.getAuthToken({provider:this.id,code:this.code})},s["b"]([Object(d["b"])()],t.prototype,"id",void 0),s["b"]([Object(h["a"])("getAuthToken",{namespace:"providers"})],t.prototype,"getAuthToken",void 0),t=s["b"]([Object(d["a"])({})],t),t}(d["c"]),A=S,E=A,P=(r("4471"),Object(k["a"])(E,O,j,!1,null,"491823b4",null));P.options.__file="AuthProvider.vue";var R=P.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view")},x=[],C={},G=Object(k["a"])(C,T,x,!1,null,null,null);G.options.__file="Auth.vue";var L=G.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("v-flex",[r("v-card",[r("v-list",{attrs:{"two-line":""}},[e._l(e.resumes,function(t,n){return[r("v-list-tile",{key:t.link},[r("v-list-tile-content",[r("v-list-tile-title",[r("a",{attrs:{href:t.link,target:"_blank",rel:"noopener"}},[e._v(e._s(t.title))])]),r("v-list-tile-sub-title",[e._v("\n                Last update: "+e._s(t.published)+"\n              ")])],1),r("v-list-tile-action",[r("v-switch",{on:{change:function(r){e.toggleResume(t.uniq)}},model:{value:t.enabled,callback:function(r){e.$set(t,"enabled",r)},expression:"item.enabled"}})],1),r("v-list-tile-action-text",[e._v("\n              Auto update "+e._s(t.enabled?"enabled":"disabled ")+"\n            ")])],1),n!==e.resumes.length-1?r("v-divider",{key:n}):e._e()]})],2)],1)],1)],1)},D=[],$=Object(h["d"])("providers"),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s["c"](t,e),t.prototype.mounted=function(){this.getResumes()},t.prototype.toggle=function(e){this.toggleResume(e)},s["b"]([Object(d["b"])()],t.prototype,"id",void 0),s["b"]([$.Getter("resumes")],t.prototype,"resumes",void 0),s["b"]([Object(h["a"])("getResumes",{namespace:"providers"})],t.prototype,"getResumes",void 0),s["b"]([Object(h["a"])("toggleResume",{namespace:"providers"})],t.prototype,"toggleResume",void 0),t=s["b"]([Object(d["a"])({})],t),t}(d["c"]),B=J,H=B,F=Object(k["a"])(H,q,D,!1,null,null,null);F.options.__file="ResumeProvider.vue";var I=F.exports;function N(e,t,r){e.matched.some(function(e){return e.meta.auth})&&(null==localStorage.getItem("token")?r({name:"login",params:{nextUrl:e.fullPath}}):r())}n["default"].use(p["a"]);var U=new p["a"]({mode:"history",routes:[{path:"/",name:"login",component:w,meta:{auth:!1}},{path:"/auth/:id",name:"auth",component:R,props:!0,meta:{auth:!1}},{path:"",component:L,children:[{path:"/resume",name:"resume",component:I,props:!0}],beforeEnter:N,meta:{auth:!0}},{path:"*",redirect:"/"}]}),W=function(){function e(){}return e.prototype.getProviders=function(e,t){var r=e.commit;return n["default"].apiService.makeRequest({url:"auth/providers"}).then(function(e){r("setList",e)})},e.prototype.getProviderRedirect=function(e,t){var r=e.commit,o=e.state;return n["default"].apiService.makeRequest({url:"auth/"+t}).then(function(e){var n=o.list.find(function(e){return e.name===t});return n&&(n.logged=!0,n.redirectUrl=e.redirect,r("setList",o.list),window.location.href=e.redirect),!0}).catch(function(){return!1})},e.prototype.getAuthToken=function(e,t){var r=e.commit,o=e.dispatch,i=t.provider,s=t.code;return n["default"].apiService.makeRequest({url:"auth/"+i,method:"POST",body:{code:s}}).then(function(e){localStorage.setItem("token",e.token),r("setToken",e.token,{root:!0}),U.push({name:"resume"}),o("refreshToken",e.token,{root:!0})})},e.prototype.getResumes=function(e,t){var r=e.commit;return n["default"].apiService.makeRequest({url:"resume",auth:!0}).then(function(e){var t=e.map(function(e){return new l(e)});r("setResumes",t)})},e.prototype.toggleResume=function(e,t){var r=e.commit,o=e.state;return n["default"].apiService.makeRequest({url:"resume",method:"POST",auth:!0,body:{uniq:t}}).then(function(e){var n=o.resumes.find(function(e){return e.uniq===t});n&&(n.enabled=e.enabled,r("setResumes",o.resumes))})},s["b"]([c()],e.prototype,"getProviders",null),s["b"]([c()],e.prototype,"getProviderRedirect",null),s["b"]([c()],e.prototype,"getAuthToken",null),s["b"]([c()],e.prototype,"getResumes",null),s["b"]([c()],e.prototype,"toggleResume",null),e}(),z=new W,M={namespaced:!0,state:{list:[],resumes:[]},getters:{list:function(e){return e.list},resumes:function(e){return e.resumes}},mutations:{setList:function(e,t){e.list=t.map(function(e){return new a(e)})},setResumes:function(e,t){e.resumes=t}},actions:{getProviders:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z.getProviders.apply(z,e)},getProviderRedirect:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z.getProviderRedirect.apply(z,e)},getAuthToken:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z.getAuthToken.apply(z,e)},getResumes:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z.getResumes.apply(z,e)},toggleResume:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return z.toggleResume.apply(z,e)}}},K=function(){function e(e){this.db=0,this.cache=0,this.groups=[],this.version=null,e&&(this.version=e.version,this.db=e.health.db.current/e.health.db.max*100,this.cache=e.health.cache.current/e.health.cache.max*100,this.groups.push(this._makeGroup("resume",e)),this.groups.push(this._makeGroup("users",e)))}return e.prototype._makeGroup=function(e,t){var r={label:e,items:[]};if(t.providers.length)for(var n=0,o=t.providers;n<o.length;n++){var i=o[n];r.items.push({label:i.name,count:i[e]})}return r},e}();n["default"].use(u["a"]);var Y=function(){function e(){this.refreshHandler=null}return e.prototype.refreshToken=function(e,t){var r=e.commit,o=e.dispatch;return n["default"].apiService.makeRequest({url:"auth/refresh",auth:!0}).then(function(e){localStorage.setItem("token",e.token),r("setToken",e.token),o("refreshToken",e.token)})},e.prototype.getStats=function(e,t){var r=e.commit;return n["default"].apiService.makeRequest({url:"stats"}).then(function(e){r("setStats",new K(e))})},e.prototype.parseJwt=function(e){var t=e.split(".")[1],r=t.replace("-","+").replace("_","/");return JSON.parse(window.atob(r))},s["b"]([c()],e.prototype,"refreshToken",null),s["b"]([c()],e.prototype,"getStats",null),e}(),Q=new Y,V=new u["a"].Store({state:{PACKAGE_JSON:JSON.parse(unescape("%7B%22name%22%3A%22pushresume%22%2C%22version%22%3A%220.1.2%22%2C%22private%22%3Atrue%2C%22scripts%22%3A%7B%22serve%22%3A%22vue-cli-service%20serve%22%2C%22build%22%3A%22vue-cli-service%20build%22%2C%22deploy%22%3A%22npm%20run%20build%20%26%26%20push-dir%20--dir%3Ddist%20--branch%3Dmaster%20--remote%3Ddeploy%20--cleanup%20--force%20--verbose%22%7D%2C%22dependencies%22%3A%7B%22vue%22%3A%22%5E2.5.17%22%2C%22vue-class-component%22%3A%22%5E6.0.0%22%2C%22vue-property-decorator%22%3A%22%5E7.0.0%22%2C%22vue-router%22%3A%22%5E3.0.1%22%2C%22vuetify%22%3A%22%5E1.1.13%22%2C%22vuex%22%3A%22%5E3.0.1%22%2C%22vuex-class%22%3A%22%5E0.3.1%22%7D%2C%22devDependencies%22%3A%7B%22@types/node%22%3A%22%5E10.11.3%22%2C%22@vue/cli-plugin-typescript%22%3A%22%5E3.0.1%22%2C%22@vue/cli-service%22%3A%22%5E3.0.1%22%2C%22node-sass%22%3A%22%5E4.9.0%22%2C%22push-dir%22%3A%22%5E0.4.1%22%2C%22sass-loader%22%3A%22%5E7.0.1%22%2C%22typescript%22%3A%22%5E3.0.0%22%2C%22vue-template-compiler%22%3A%22%5E2.5.17%22%7D%7D")),busy:!1,workers:[],error:null,token:"",stats:new K},modules:{providers:M},getters:{version:function(e){return e.PACKAGE_JSON.version},busy:function(e){return e.busy},error:function(e){return e.error},token:function(e){return e.token},stats:function(e){return e.stats}},mutations:{setBusy:function(e,t){e.busy=t},setError:function(e,t){e.error=t},setToken:function(e,t){e.token=t},setStats:function(e,t){e.stats=t}},actions:{addWorker:function(e){var t=e.commit,r=e.state,n=(new Date).valueOf();return r.workers.push(n),t("setBusy",!!r.workers.length),Promise.resolve(n)},removeWorker:function(e,t){var r=e.commit,n=e.state,o=t.current;n.workers.splice(n.workers.findIndex(function(e){return e===o}),1),r("setBusy",!!n.workers.length)},removeError:function(e){var t=e.commit;t("setError",null)},refreshToken:function(e,t){var r=Q.parseJwt(t);if(!r.exp)return console.error("Can't refresh. No expiration field at token.");clearTimeout(Q.refreshHandler),this.refreshHandler=setTimeout(function(){Q.refreshToken(e)},new Date(1e3*r.exp).valueOf()-(new Date).valueOf()-6e4)},logout:function(e){var t=e.commit;clearTimeout(this.refreshHandler),t("setToken",null),localStorage.removeItem("token"),U.push({name:"login"})},getStats:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Q.getStats.apply(Q,e)}}}),X="";X="https://pushresume.herokuapp.com/";var Z={apiUrl:X},ee=function(){function e(){}return e.prototype.makeRequest=function(e){return s["a"](this,void 0,Promise,function(){var t,r;return s["d"](this,function(n){switch(n.label){case 0:return t=new Headers({"Content-Type":"application/json"}),e.method||(e.method="GET"),e.auth&&t.append("Authorization","JWT "+localStorage.getItem("token")),[4,fetch(Z.apiUrl+e.url,{method:e.method,headers:t,body:e.body?JSON.stringify(e.body):null})];case 1:return r=n.sent(),[4,this._parseResponse(r)];case 2:return[2,n.sent()]}})})},e.prototype._parseResponse=function(e){return e.status>=200&&e.status<300?e.json():401===e.status?(V.dispatch("logout"),e.json().then(function(e){return Promise.reject(new Error(e.message))})):e.json()},e}(),te={install:function(e,t){e.apiService=new ee,e.prototype.$apiService=e.apiService}},re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("GhFork"),r("v-toolbar",{staticClass:"grey lighten-5"},[r("v-toolbar-side-icon",{on:{click:function(t){e.showSidebar=!e.showSidebar}}}),r("v-toolbar-title",[e._v("\n      pushResume\n    ")]),r("v-spacer"),e.isLogged?r("v-btn",{attrs:{flat:"",fab:""},on:{click:function(t){e.logout()}}},[r("v-icon",[e._v("power_settings_new")])],1):e._e()],1),r("v-navigation-drawer",{staticClass:"teal",attrs:{dark:"",absolute:"",temporary:""},model:{value:e.showSidebar,callback:function(t){e.showSidebar=t},expression:"showSidebar"}},[r("Stats",{attrs:{column:"true"}})],1),r("v-content",[r("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.busy,expression:"busy"}],staticClass:"loader",attrs:{indeterminate:!0,height:"5",color:"primary"}}),r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-fade-transition",{attrs:{mode:"out-in"}},[r("router-view")],1)],1)],1),r("v-snackbar",{attrs:{timeout:0},model:{value:e.showError,callback:function(t){e.showError=t},expression:"showError"}},[e._v("\n    "+e._s(e.error)+"\n    "),r("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.closeError()}}},[e._v("Close")])],1)],1)},ne=[],oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-content-space-between":"","align-center":"",column:""}},[r("v-layout",{staticStyle:{"flex-grow":"0"},attrs:{row:""}},e._l(e.stats.groups,function(t,n){return r("v-list",{key:t.label+n,staticClass:"list",attrs:{dense:"",subheader:"",dark:""}},[r("v-subheader",{staticClass:"text",attrs:{dark:""}},[e._v(e._s(t.label))]),e._l(t.items,function(t){return r("v-list-tile",{key:t.label+n},[r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.label)+": "+e._s(t.count))])],1)],1)})],2)})),r("v-spacer"),r("div",[r("v-progress-circular",{attrs:{color:"white",rotate:-90,size:100,width:15,value:e.stats.db}},[e._v("\n        db\n      ")]),r("v-progress-circular",{attrs:{color:"white",rotate:-90,size:100,width:15,value:e.stats.cache}},[e._v("\n        cache\n      ")])],1),r("v-list",{staticClass:"list",attrs:{dense:"",dark:""}},[r("v-list-tile",[r("v-list-tile-content",[r("v-list-tile-title",[e._v("\n            Frontend: "+e._s(e.version)+"\n          ")])],1)],1),r("v-divider"),r("v-list-tile",[r("v-list-tile-content",[r("v-list-tile-title",[e._v("\n            Backend: "+e._s(e.stats.version)+"\n          ")])],1)],1)],1)],1)],1)},ie=[],se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s["c"](t,e),t.prototype.mounted=function(){this.getStats()},s["b"]([Object(h["b"])("version")],t.prototype,"version",void 0),s["b"]([Object(h["b"])("stats")],t.prototype,"stats",void 0),s["b"]([Object(h["a"])("getStats")],t.prototype,"getStats",void 0),t=s["b"]([d["a"]],t),t}(d["c"]),ue=se,ae=ue,le=(r("215e"),Object(k["a"])(ae,oe,ie,!1,null,"8d68bf94",null));le.options.__file="Stats.vue";var ce=le.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"github-fork-ribbon right-bottom",attrs:{href:"https://github.com/pushresume","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub"}},[e._v("Fork me on GitHub")])},ve=[],fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s["c"](t,e),t=s["b"]([d["a"]],t),t}(d["c"]),de=fe,he=de,me=(r("215a"),Object(k["a"])(he,pe,ve,!1,null,"6028a8c6",null));me.options.__file="GhFork.vue";var be=me.exports,ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showSidebar=!1,t}return s["c"](t,e),Object.defineProperty(t.prototype,"isLogged",{get:function(){return!!this.token},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showError",{get:function(){return!!this.error},enumerable:!0,configurable:!0}),t.prototype.closeError=function(){this.removeError()},t.prototype.mounted=function(){var e=localStorage.getItem("token");e&&(this.setToken(e),this.refreshToken(e),U.push({name:"resume"}))},t.prototype.toResume=function(){U.push({name:"resume"})},s["b"]([Object(h["b"])("busy")],t.prototype,"busy",void 0),s["b"]([Object(h["b"])("error")],t.prototype,"error",void 0),s["b"]([Object(h["b"])("token")],t.prototype,"token",void 0),s["b"]([Object(h["c"])("setToken")],t.prototype,"setToken",void 0),s["b"]([Object(h["a"])("removeError")],t.prototype,"removeError",void 0),s["b"]([Object(h["a"])("refreshToken")],t.prototype,"refreshToken",void 0),s["b"]([Object(h["a"])("logout")],t.prototype,"logout",void 0),t=s["b"]([Object(d["a"])({components:{Stats:ce,GhFork:be}})],t),t}(d["c"]),ye=ge,ke=ye,_e=(r("730a"),Object(k["a"])(ke,re,ne,!1,null,"18cbc3b6",null));_e.options.__file="App.vue";var we=_e.exports;n["default"].use(i.a),n["default"].use(te),n["default"].config.productionTip=!1,new n["default"]({router:U,store:V,render:function(e){return e(we)}}).$mount("#app")},cfb3:function(e,t,r){"use strict";var n=r("a218"),o=r.n(n);o.a}});
//# sourceMappingURL=app.c994bc18.js.map